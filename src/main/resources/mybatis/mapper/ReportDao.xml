<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.test.weekly_report.dao.ReportDao">

    <resultMap id="BaseResultMap" type="com.test.weekly_report.entity.Report">
        <!--@Table report-->
        <result property="reportId" column="report_id" jdbcType="INTEGER"/>
        <result property="reportName" column="report_name" jdbcType="VARCHAR"/>
        <result property="reportAuthorid" column="report_authorid" jdbcType="VARCHAR"/>
        <result property="reportTutorid" column="report_tutorid" jdbcType="VARCHAR"/>
        <result property="reportPlandone" column="report_planDone" jdbcType="VARCHAR"/>
        <result property="reportContent" column="report_content" jdbcType="VARCHAR"/>
        <result property="reportDifficult" column="report_difficult" jdbcType="VARCHAR"/>
        <result property="reportNextplan" column="report_nextplan" jdbcType="VARCHAR"/>
        <result property="reportComment" column="report_comment" jdbcType="VARCHAR"/>
        <result property="reportFile" column="report_file" jdbcType="VARCHAR"/>
        <result property="reportCreattime" column="report_creattime" jdbcType="TIMESTAMP"/>
        <result property="reportStatus" column="report_status" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BaseResultMap">
        select
          report_id, report_name, report_authorid, report_tutorid, report_planDone, report_content, report_difficult, report_nextplan, report_comment, report_file, report_creattime, report_status
        from weeklyreport.report
        where report_id = #{reportId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BaseResultMap">
        select
          report_id, report_name, report_authorid, report_tutorid, report_planDone, report_content, report_difficult, report_nextplan, report_comment, report_file, report_creattime, report_status
        from weeklyreport.report
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAllByItem" resultMap="BaseResultMap">
        select
          report_id, report_name, report_authorid, report_tutorid, report_planDone, report_content, report_difficult, report_nextplan, report_comment, report_file, report_creattime, report_status
        from weeklyreport.report
        <where>
            <if test="reportId != null">
                and report_id = #{reportId}
            </if>
            <if test="reportName != null and reportName != ''">
                and report_name = #{reportName}
            </if>
            <if test="reportAuthorid != null and reportAuthorid != ''">
                and report_authorid = #{reportAuthorid}
            </if>
            <if test="reportTutorid != null and reportTutorid != ''">
                and report_tutorid = #{reportTutorid}
            </if>
            <if test="reportPlandone != null and reportPlandone != ''">
                and report_planDone = #{reportPlandone}
            </if>
            <if test="reportContent != null and reportContent != ''">
                and report_content = #{reportContent}
            </if>
            <if test="reportDifficult != null and reportDifficult != ''">
                and report_difficult = #{reportDifficult}
            </if>
            <if test="reportNextplan != null and reportNextplan != ''">
                and report_nextplan = #{reportNextplan}
            </if>
            <if test="reportComment != null and reportComment != ''">
                and report_comment = #{reportComment}
            </if>
            <if test="reportFile != null and reportFile != ''">
                and report_file = #{reportFile}
            </if>
            <if test="reportCreattime != null">
                and report_creattime = #{reportCreattime}
            </if>
            <if test="reportStatus != null and reportStatus != ''">
                and report_status = #{reportStatus}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="reportId" useGeneratedKeys="true">
        insert into weeklyreport.report(report_name, report_authorid, report_tutorid, report_planDone, report_content, report_difficult, report_nextplan, report_comment, report_file, report_creattime, report_status)
        values (#{reportName}, #{reportAuthorid}, #{reportTutorid}, #{reportPlandone}, #{reportContent}, #{reportDifficult}, #{reportNextplan}, #{reportComment}, #{reportFile}, #{reportCreattime}, #{reportStatus})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update weeklyreport.report
        <set>
            <if test="reportName != null and reportName != ''">
                report_name = #{reportName},
            </if>
            <if test="reportAuthorid != null and reportAuthorid != ''">
                report_authorid = #{reportAuthorid},
            </if>
            <if test="reportTutorid != null and reportTutorid != ''">
                report_tutorid = #{reportTutorid},
            </if>
            <if test="reportPlandone != null and reportPlandone != ''">
                report_planDone = #{reportPlandone},
            </if>
            <if test="reportContent != null and reportContent != ''">
                report_content = #{reportContent},
            </if>
            <if test="reportDifficult != null and reportDifficult != ''">
                report_difficult = #{reportDifficult},
            </if>
            <if test="reportNextplan != null and reportNextplan != ''">
                report_nextplan = #{reportNextplan},
            </if>
            <if test="reportComment != null and reportComment != ''">
                report_comment = #{reportComment},
            </if>
            <if test="reportFile != null and reportFile != ''">
                report_file = #{reportFile},
            </if>
            <if test="reportCreattime != null">
                report_creattime = #{reportCreattime},
            </if>
            <if test="reportStatus != null and reportStatus != ''">
                report_status = #{reportStatus},
            </if>
        </set>
        where report_id = #{reportId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from weeklyreport.report where report_id = #{reportId}
    </delete>
     <!--查询所有report-->
    <select id="queryAll" resultMap="BaseResultMap">
        select
        report_id, report_name, report_authorid, report_tutorid, report_planDone, report_content, report_difficult, report_nextplan, report_comment, report_file, report_creattime, report_status        from report
    </select>
</mapper>